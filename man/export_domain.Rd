% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mod_k_export.R
\name{export_domain}
\alias{export_domain}
\title{Export an SDTM domain dataset}
\usage{
export_domain(
  data,
  domain,
  output_dir,
  formats = c("xpt"),
  xpt_version = 8L,
  target_meta = NULL,
  domain_meta = NULL,
  keys = NULL,
  drop_empty_perm = TRUE,
  max_label_length = 40L
)
}
\arguments{
\item{data}{Data frame / tibble. The domain dataset to export.}

\item{domain}{Character. SDTM domain code (e.g., \code{"AE"}).}

\item{output_dir}{Character. Root output directory. Sub-directories
\code{XPT/}, \code{RDA/}, \code{CSV/} are created when the
corresponding format is requested.}

\item{formats}{Character vector. Which output formats to produce.
Any combination of \code{"xpt"}, \code{"rds"}, \code{"csv"},
\code{"rda"}. Default \code{c("xpt")}.}

\item{xpt_version}{Integer. SAS transport version: 5 or 8. Default 8.}

\item{target_meta}{Tibble or \code{NULL}. Variable-level metadata with
\code{domain}, \code{var}, \code{label}, \code{core} (and optionally
\code{type}, \code{length}, \code{significant_digits}). Used to
enforce column order, labels, widths, rounding, and to drop all-empty
PERM variables.}

\item{domain_meta}{Tibble or \code{NULL}. Dataset-level metadata with
\code{domain} and \code{description}.}

\item{keys}{Character vector or \code{NULL}. Sort keys. If \code{NULL},
uses \code{STUDYID}, \code{USUBJID}, \code{<domain>SEQ}.}

\item{drop_empty_perm}{Logical. If \code{TRUE} (default), drop PERM
variables that are entirely empty (all NA / blank).}

\item{max_label_length}{Integer. Maximum label length. Default 40.}
}
\value{
Invisible tibble: the finalized dataset.
}
\description{
Single, unified export function that finalizes a domain dataset using
metadata (ordering, labelling, type enforcement) and writes it to one
or more formats.
}
\examples{
\dontrun{
# Export to XPT v8 (default)
export_domain(ae, "AE", "sdtm/datasets", target_meta = target_meta)

# Export to XPT v8 + CSV
export_domain(ae, "AE", "sdtm/datasets", formats = c("xpt", "csv"))

# Export to all formats with XPT v5
export_domain(ae, "AE", "sdtm/datasets",
              formats = c("xpt", "rds", "csv", "rda"),
              xpt_version = 5L)
}

}
