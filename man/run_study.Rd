% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_study.R
\name{run_study}
\alias{run_study}
\title{Run a complete SDTM study pipeline}
\usage{
run_study(
  config_path = NULL,
  metadata_path = NULL,
  ct_path = NULL,
  raw_dir = NULL,
  output_dir = NULL,
  programs_dir = NULL,
  export_formats = c("xpt", "rda"),
  generate_programs = TRUE,
  domains = NULL,
  create_supp = NULL,
  drop_empty_perm = FALSE,
  validate = TRUE,
  verbose = TRUE
)
}
\arguments{
\item{config_path}{Character or \code{NULL}. Path to a \code{config.yaml} file.
If \code{NULL} (the default), auto-discovers \code{config.yaml} or
\code{metadata/config.yaml} in the current working directory.
If provided, \code{metadata_path}, \code{ct_path}, \code{raw_dir}, \code{output_dir} and
\code{programs_dir} are read from the YAML (but explicit arguments override).}

\item{metadata_path}{Character or \code{NULL}. Path to \code{Study_Metadata.xlsx}.}

\item{ct_path}{Character or \code{NULL}. Path to \code{Study_CT.xlsx}.}

\item{raw_dir}{Character or \code{NULL}. Directory containing raw datasets.}

\item{output_dir}{Character or \code{NULL}. Directory for exported datasets.}

\item{programs_dir}{Character or \code{NULL}. Directory for generated R programs.}

\item{export_formats}{Character vector. Default \code{c("xpt", "rda")}.}

\item{generate_programs}{Logical. Default \code{TRUE}. Write an R script per
domain into \code{programs_dir}.}

\item{domains}{Character vector or \code{NULL}. If \code{NULL}, builds all domains
found in the metadata.}

\item{create_supp}{Logical or \code{NULL}. Default \code{NULL} (inherits from config).}

\item{drop_empty_perm}{Logical or named list. Controls whether permissible
(PERM) variables that are entirely empty are dropped from exported datasets.
\itemize{
\item \code{TRUE}: drop empty PERM variables for all domains.
\item \code{FALSE} (default): keep all PERM variables even if empty.
\item Named list: set per-domain overrides. Use \code{".default"} for the study-level
default and domain names for exceptions, e.g.
\code{list(.default = TRUE, DM = FALSE, AE = FALSE)}.
}}

\item{validate}{Logical. Default \code{TRUE}.}

\item{verbose}{Logical. Default \code{TRUE}.}
}
\value{
Named list with:
\describe{
\item{results}{Named list of \code{build_result} objects, one per domain.}
\item{target_meta}{The target metadata tibble used.}
\item{ct_lib}{The controlled-terminology tibble used.}
\item{rule_set}{The compiled rule set.}
\item{config}{The \code{sdtm_config} object used.}
\item{exported}{Named list of export paths per domain.}
\item{programs}{Named list of generated program paths (or \code{NULL}).}
}
}
\description{
One-call entry point for building all SDTM domains from your study files.

Given a \code{config.yaml} (or individual paths), this function:
\enumerate{
\item Reads \code{Study_Metadata.xlsx} and \code{Study_CT.xlsx}
\item Loads raw datasets from the raw-data directory (\code{.sas7bdat}, \code{.csv}, \code{.xpt}, …)
\item Compiles derivation rules from the metadata
\item Builds every domain defined in the metadata
\item Exports each domain as XPT \strong{and} RDA (or custom formats)
\item Optionally generates an R program per domain in the programs directory
}
}
\section{Folder Structure}{


\if{html}{\out{<div class="sourceCode">}}\preformatted{my_study/
├── metadata/
│   ├── config.yaml
│   ├── Study_Metadata.xlsx
│   └── Study_CT.xlsx
├── raw/
│   ├── dm.sas7bdat
│   ├── ae.sas7bdat
│   └── ...
└── sdtm/
    ├── datasets/
    │   ├── dm.xpt
    │   ├── dm.rda
    │   └── ...
    └── programs/
        ├── dm.R
        ├── ae.R
        └── ...
}\if{html}{\out{</div>}}
}

\examples{
\dontrun{
# Auto-discover config.yaml in the working directory
setwd("my_study")
out <- run_study()

# Or pass the config path explicitly
out <- run_study("metadata/config.yaml")

# Using explicit paths (no config.yaml needed)
out <- run_study(
  metadata_path = "metadata/Study_Metadata.xlsx",
  ct_path       = "metadata/Study_CT.xlsx",
  raw_dir       = "raw",
  output_dir    = "sdtm/datasets",
  programs_dir  = "sdtm/programs"
)

# Datasets only (no R programs generated)
out <- run_study(generate_programs = FALSE)
}

}
