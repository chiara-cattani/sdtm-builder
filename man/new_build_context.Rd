% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mod_a_primitives.R
\name{new_build_context}
\alias{new_build_context}
\title{Create a build context for domain construction}
\usage{
new_build_context(
  domain,
  config,
  meta_bundle,
  rule_set,
  dm_cache = NULL,
  ct_cache = list(),
  sv_cache = NULL
)
}
\arguments{
\item{domain}{Character (required). The domain being built.}

\item{config}{\code{sdtm_config} object (required).}

\item{meta_bundle}{\code{meta_bundle} object (required).}

\item{rule_set}{\code{rule_set} object (required).}

\item{dm_cache}{Tibble or \code{NULL}. Pre-loaded DM data for subject-level joins.}

\item{ct_cache}{Named list. Pre-resolved controlled terminology lookups.}

\item{sv_cache}{Tibble or \code{NULL}. Subject visits for visit derivation.}
}
\value{
S3 object of class \code{build_context} (backed by an environment for
mutability during the build pipeline).
}
\description{
Mutable environment-like object that carries state through a domain build:
current data frame, computed caches (e.g. DM subject table, CT lookups),
provenance tracking, and error accumulator.
}
\section{Edge cases}{

\itemize{
\item Domain not in \code{meta_bundle} â†’ error.
\item Caches populated lazily on first access if NULL.
}
}

\section{Unit tests}{

\itemize{
\item Create + inspect
\item Domain mismatch detected
\item Cache lazy-load works
}
}

